<h1>Productos</h1>

<form method="get" action="/products">
  <input type="text" name="query" placeholder="Categoría o 'available'" value="{{queryParams.query}}" />
  <select name="sort">
    <option value="">Orden</option>
    <option value="asc" {{#if (eq queryParams.sort "asc")}}selected{{/if}}>Precio asc</option>
    <option value="desc" {{#if (eq queryParams.sort "desc")}}selected{{/if}}>Precio desc</option>
  </select>
  <input type="number" name="limit" min="1" placeholder="limit" value="{{queryParams.limit}}" />
  <button type="submit">Aplicar</button>
</form>

<ul>
  {{#each products}}
    <li>
      <a href="/products/{{this._id}}"><strong>{{this.title}}</strong></a>
      - ${{this.price}} - {{this.category}}
      <form class="inline" action="/api/carts/1/products/{{this._id}}" method="post">
        <button type="submit">Agregar al carrito</button>
      </form>
    </li>
  {{/each}}
</ul>

<div>
  {{#if prevLink}}
    <a href="{{prevLink}}">« Página {{prevPage}}</a>
  {{/if}}
  <span> Página {{page}} de {{totalPages}} </span>
  {{#if nextLink}}
    <a href="{{nextLink}}">Página {{nextPage}} »</a>
  {{/if}}
</div>
